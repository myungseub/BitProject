<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<link rel="stylesheet" href="particle_group.css">
</head>

<body>

<!-- <textarea id="input" name="lll"></textarea> -->
<input type="text" id="input"/>


<button onclick="input(1);">뒤집기</button>
<button onclick="input(2);">역순</button>
<button onclick="input(3);">빈칸</button>
<button onclick="input(4);">세우기</button>
<button onclick="input(5);">암기 1단계</button>
<button onclick="input(6);">암기 2단계</button>


	<script>
		
		
	
		function closer() {
			var k=0;
 			function addCloser(){
				k++;
				return k;
 			}
 			return addCloser;
		}
		var abc = closer();
		
		
		
		function closer2() {
			var k=0;
 			function addCloser2(){
				k++;
				return k;
 			}
 			return addCloser2;
		}
		var abc2 = closer2();
		
		
		
		function closer3() {
			var k=0;
 			function addCloser3(){
				k++;
				return k;
 			}
 			return addCloser3;
		}
		var abc3 = closer3();
		
	
		
	function input(how){
		
		
		
		if(how!=4){$("div").remove();}
		var input = inputValue();
		$("br").remove();
		
		if (how != 4 && how != 5 && how != 6) {
			if (input == "") {input = " ";}
			document.querySelector("body").innerHTML += "<p class="+abc3()+">"+input+"</p>";
			ab2 = abc();
 		}
		
		if ( (how == 5 || how == 6) && input != "" ) {
			document.querySelector("body").innerHTML += "<p class="+abc3()+">"+input+"</p>";
			ab2 = abc();
		}
		

		if(how == 5 || how == 6){ab2 = abc(); var ab3 = abc2(); var pCount = ab2 - ab3;}
		
		var count = input.length;
		
		switch(how) {
		
			case 2:
				for (var i = count-1; i >=0  ; i--) {
					
					arrayset(input, i)			
				}

				addAttribute();
				
				break;
			
				
 			case 5:
 				var CC = 3;
 			case 6:	
 				if (CC != undefined){
 					
 				} else {
 					CC = 2;}
 				
 				for (var i = 1; i <= pCount; i++) {
	 				var pText = $("p."+i).text();
 				if (pTextLength != undefined){
 					
 				} else {
 				var pTextLength = pText.length;
 					}
	 				
	 				
					for (var z = 0; z < pTextLength ; z++) {
						arrayset(pText, z);
					}

					
					if (boolean2 == undefined) {var boolean2 = true;}

					boolean1 = false;
					
					var killRandom = 0;
					var div = $("div");
					var C_result = pTextLength/CC;
					
					for (var ii = 0; ii < C_result; ii++) {
						
						if (allLength == undefined) {var allLength = 0; var boolean1 = false; var pLength = 0; var bBlank = 0; blank = 0;}

						if (boolean1 != boolean2) {var allLength = allLength + pLength; boolean1 = boolean2;}
						
 						killRandom = parseInt(Math.random()*(pTextLength));
						div[killRandom+allLength].setAttribute("class", "blank");
						
					}
						
						
					console.log("minusBlank",minusBlank);

						
						blank = $(".blank").length;
						var minusBlank = (blank - bBlank);
						
						console.log("-",minusBlank);
						
						var needBlank = C_result - minusBlank;
						
						console.log("--needBlank", needBlank);
						
						while ( needBlank > 0 ) {
							
							killRandom = parseInt(Math.random()*(pTextLength));
							div[killRandom+allLength].setAttribute("class", "blank");
							
							
							minusBlank = $(".blank").length - bBlank;
							
							needBlank = C_result - minusBlank;
							
							console.log("needBlank---",needBlank);
						}
	  				    console.log("needBlank----",needBlank);
						
							
						

					pLength = pTextLength;
					bBlank = $(".blank").length;


					document.querySelector("body").innerHTML += "<br>";
				}
 				
				
			break;
				

			case 1:		
			
			case 3:
				for (var i = 0; i < count; i++) {
					arrayset(input, i);
				}
				
				if(how==1) {addAttribute();	break;}
						
					var div = $("div");
					var j;
				
				for (var i = 0; i < count/2; i++) {
					j = parseInt(Math.random()*count);
					div[j].setAttribute("class", "blank");
				}
					
			case 4:
				$("div").removeClass("updown");			
			
		}
		
		var start = document.querySelector("#input");
		
		
	start.select();
	$("#input").attr("value", input);
// 	$("#input").val(input);
	}
	
	
	
	
	
	
	
	
	
	function addAttribute(){
		var div = $("div");
		
		for (var i = 0; i < div.length; i++) {
			div[i].setAttribute("class", "updown");
		}
	}
	
	
	function inputValue(){return document.getElementById("input").value;}
	
	
	function arrayset(input, i){
		var w = input.charAt(i);
		document.querySelector("body").innerHTML += "<div>"+w+"</div>";
	}
	
	</script>
	
</body>
</html>